{% load static %}
{% load custom %}

<!-- start: sidebar -->
<aside id="sidebar-left" class="sidebar-left">
    <div class="sidebar-header">
        <div class="sidebar-title">
            –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        </div>
        <div class="sidebar-toggle d-none d-md-block" data-toggle-class="sidebar-left-collapsed"
             data-target="html" data-fire-event="sidebar-left-toggle">
            <i class="fas fa-bars" aria-label="Toggle sidebar"></i>
        </div>
    </div>
    <div class="nano">
        <div class="nano-content">
            <nav id="menu" class="nav-main" role="navigation">
                <ul class="nav nav-main">
                    {% if user.is_superuser %}
                        <li class="nav-parent">
                            <a class="nav-link" href="#">
                                <i class='bx bx-shield-quarter' aria-hidden="true"></i>
                                <span>–ß–∞—Ç</span>
                            </a>
                            <ul class="nav nav-children">
                                <li>
                                    <a class="nav-link" href="{% url 'chat_app:room' room_name='shakirov' %}">
                                        Shakirov
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link"
                                       href="{% url 'library_app:video_conference' room_name='shakirov' %}">
                                        –í–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link"
                                       href="{% url 'library_app:audio_conference' room_name='shakirov' %}">
                                        –ê—É–¥–∏–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link"
                                       href="{% url 'tasks_app:task-list' %}">
                                        –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
                                    </a>
                                </li>
                            </ul>
                        </li>
                    {% endif %}

                    {% if user.is_superuser %}
                        <li class="nav-parent">
                            <a class="nav-link" href="#">
                                <i class='bx bx-shield-quarter' aria-hidden="true"></i>
                                <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                            </a>
                            <ul class="nav nav-children">
                                <li>
                                    <a class="nav-link" href="{% url 'administration_app:property_list' %}">
                                        –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ä—Ç–∞–ª–∞
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link"
                                       href="{% url 'hrdepartment_app:business_process_routes_list' %}">
                                        –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∏–∑–Ω–µ—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="{% url 'hrdepartment_app:bptrip_list' %}">
                                        (–£—Å—Ç–∞—Ä–µ–≤—à–µ–µ) –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∏–∑–Ω–µ—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="{% url 'customers_app:group_list' %}">
                                        –ì—Ä—É–ø–ø—ã
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="{% url 'administration_app:json' %}">
                                        –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="{% url 'administration_app:monitoring' %}">
                                        –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="{% url 'administration_app:1c_odata_request' %}">
                                        –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä OData-–∑–∞–ø—Ä–æ—Å–æ–≤
                                    </a>
                                </li>
                            </ul>
                        </li>
                    {% endif %}
                    <li class="nav-parent">
                        <a class="nav-link" href="#">
                            <i class='bx bxs-report' aria-hidden="true"></i>
                            <span>–û—Ç—á–µ—Ç—ã</span>
                        </a>
                        <ul class="nav nav-children">
                            <li class="nav-parent">
                                <a class="nav-link" href="#">
                                    <span>–£—á–µ—Ç —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</span>
                                </a>
                                <ul class="nav nav-children">
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:reportcard_list' %}">
                                            –ñ—É—Ä–Ω–∞–ª —Ä–∞–∑—ä–µ–∑–¥–æ–≤
                                        </a>
                                    </li>
                                    {% if user|has_group:"–ñ—É—Ä–Ω–∞–ª —Ä–∞–∑—ä–µ–∑–¥–æ–≤" %}
                                        <li>
                                            <a class="nav-link"
                                               href="{% url 'hrdepartment_app:reportcard_listmanual' %}">
                                                –°–ø–∏—Å–æ–∫ —Ä–∞–∑—ä–µ–∑–¥–æ–≤
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% if user.is_superuser %}
                                        <li>
                                            <a class="nav-link"
                                               href="{% url 'hrdepartment_app:reportcard_listadmin' %}">
                                                –°–ø–∏—Å–æ–∫ —Ä–∞–∑—ä–µ–∑–¥–æ–≤ (admin)
                                            </a>
                                        </li>
                                    {% endif %}
                                    {% if user|has_group:"–û—Ç—á–µ—Ç—ã –†–í" %}
                                        <li>
                                            <a class="nav-link" href="{% url 'hrdepartment_app:reportcard_detail' %}">
                                                –¢–∞–±–µ–ª—å –†–í
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link"
                                               href="{% url 'hrdepartment_app:reportcard_detail_year' %}">
                                                –¢–∞–±–µ–ª—å –†–í (–≥–æ–¥–æ–≤–æ–π)
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link"
                                               href="{% url 'hrdepartment_app:reportcard_detail_fact' %}">
                                                –¢–∞–±–µ–ª—å –†–í (—Ñ–∞–∫—Ç)
                                            </a>
                                        </li>
                                    {% endif %}
                                    <li>
                                        <a class="nav-link"
                                           href="{% url 'hrdepartment_app:reportcard_detail_ias' %}">
                                            –¢–∞–±–µ–ª—å –†–í (–ò–ê–°)
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-parent">
                                <a class="nav-link" href="#">
                                    <span>–°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏</span>
                                </a>
                                <ul class="nav nav-children">
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:bpmemo_month_report' %}">
                                            –°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏ (–∫–æ–Ω—Ç—Ä–æ–ª—å)
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:bpmemo_report' %}">
                                            –û—Ç—á–µ—Ç –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
                                        </a>
                                    </li>

                                </ul>
                            </li>
                            {% if user.is_staff %}
                                <li class="nav-parent">
                                    <a class="nav-link" href="#">
                                        <span>–ü–µ—Ä—Å–æ–Ω–∞–ª</span>
                                    </a>
                                    <ul class="nav nav-children">
                                        <li>
                                            <a class="nav-link" href="{% url 'hrdepartment_app:seasonality-report' %}">
                                                –°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –æ—Ç–ø—É—Å–∫–æ–≤
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link" href="{% url 'hrdepartment_app:absence_analysis' %}">
                                                –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤ —Ä–∞–±–æ—Ç—ã
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link" href="{% url 'hrdepartment_app:weekday-analysis' %}">
                                                –í–ª–∏—è–Ω–∏–µ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ –Ω–∞ –æ—Ç–≥—É–ª—ã
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link" href="{% url 'hrdepartment_app:time_distribution' %}">
                                                –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –≤—Ä–µ–º–µ–Ω–∏
                                            </a>
                                        </li>
                                        <li>
                                            <a class="nav-link" href="{% url 'customers_app:inactive_users_report' %}">
                                                –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            {% endif %}
                            {% if user.is_staff %}
                                <li class="nav-parent">
                                    <a class="nav-link" href="#">
                                        <span>–°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏</span>
                                    </a>
                                    <ul class="nav nav-children">
                                        <li>
                                            <a class="nav-link"
                                               href="{% url 'hrdepartment_app:management_dashboard' %}">
                                                –û—Ç—á–µ—Ç—ã –¥–ª—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
                                            </a>
                                        </li>
                                        {#                                        <li>#}
                                        {#                                            <a class="nav-link" href="{% url 'hrdepartment_app:absence_analysis' %}">#}
                                        {#                                                –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤ —Ä–∞–±–æ—Ç—ã#}
                                        {#                                            </a>#}
                                        {#                                        </li>#}
                                        {#                                        <li>#}
                                        {#                                            <a class="nav-link" href="{% url 'hrdepartment_app:weekday-analysis' %}">#}
                                        {#                                                –í–ª–∏—è–Ω–∏–µ –¥–Ω—è –Ω–µ–¥–µ–ª–∏ –Ω–∞ –æ—Ç–≥—É–ª—ã#}
                                        {#                                            </a>#}
                                        {#                                        </li>#}
                                        {#                                        <li>#}
                                        {#                                            <a class="nav-link" href="{% url 'hrdepartment_app:time_distribution' %}">#}
                                        {#                                                –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –≤—Ä–µ–º–µ–Ω–∏#}
                                        {#                                            </a>#}
                                        {#                                        </li>#}
                                    </ul>
                                </li>
                            {% endif %}
                            <li>
                                <a class="nav-link" href="{% url 'library_app:event_list' %}">
                                    –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-parent">
                        <a class="nav-link" href="#">
                            <i class="bx bx-book-content" aria-hidden="true"></i>
                            <span>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</span>
                        </a>
                        <ul class="nav nav-children">
                            <li>
                                <a class="nav-link" href="{% url 'customers_app:staff_list' %}">
                                    –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'customers_app:jobs_list' %}">
                                    –î–æ–ª–∂–Ω–æ—Å—Ç–∏
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'customers_app:harmfuls_list' %}">
                                    –í—Ä–µ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Ç—Ä—É–¥–∞
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'contracts_app:typedocuments_list' %}">
                                    –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'contracts_app:typecontracts_list' %}">
                                    –¢–∏–ø—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'contracts_app:typepropertys_list' %}">
                                    –¢–∏–ø—ã –∏–º—É—â–µ—Å—Ç–≤–∞
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'contracts_app:estate_list' %}">
                                    –ò–º—É—â–µ—Å—Ç–≤–æ
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'customers_app:divisions_list' %}">
                                    –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'customers_app:counteragent_list' %}">
                                    –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'customers_app:documents_list' %}">
                                    –î–æ–∫—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'hrdepartment_app:purpose_list' %}">
                                    –¶–µ–ª–∏ —Å–ª—É–∂–µ–±–Ω–æ–π –ø–æ–µ–∑–¥–∫–∏
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'hrdepartment_app:medicalorg_list' %}">
                                    –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'hrdepartment_app:place_list' %}">
                                    –ú–µ—Å—Ç–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-parent">
                        <a class="nav-link" href="#">
                            <i class='bx bxs-book-content' aria-hidden="true"></i>
                            <span>–î–æ–≥–æ–≤–æ—Ä–∞</span>
                        </a>
                        <ul class="nav nav-children">
                            <li>
                                <a class="nav-link" href="{% url 'contracts_app:index' %}">
                                    –û–±—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤
                                </a>
                            </li>
                            {% if request.user.is_superuser %}
                                <li>
                                    <a class="nav-link" href="{% url 'contracts_app:index-admin' %}">
                                        –û–±—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ - admin
                                    </a>
                                </li>
                            {% endif %}
                            <li>
                                <a class="nav-link" href="{% url 'contracts_app:counteragent_check' %}">
                                    –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
                                </a>
                            </li>
                            <li class="nav-parent">
                                <a class="nav-link" href="#">
                                    <i class='bx bxs-book-content' aria-hidden="true"></i>
                                    <span>–û—Ç—á–µ—Ç—ã</span>
                                </a>
                                <ul class="nav nav-children">
                                    <li>
                                        <a class="nav-link" href="{% url 'contracts_app:contract_report' %}">
                                            –û–±—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤
                                        </a>
                                    </li>

                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-parent">
                        <a class="nav-link" href="#">
                            <i class='bx bx-task' aria-hidden="true"></i>
                            <span>–≠–î–û</span>
                        </a>
                        <ul class="nav nav-children">
                            <li class="nav-parent">
                                <a class="nav-link" href="#">
                                    <span>–î–æ–≥–æ–≤–æ—Ä–∞</span>
                                </a>
                                <ul class="nav nav-children">
                                    <li>
                                        <a class="nav-link" href="#">
                                            –ë–ª–∞–Ω–∫ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è <br>
                                            –¥–æ–≥–æ–≤–æ—Ä–∞
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="#">
                                            –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å –ø–æ <br>
                                            –¥–æ–≥–æ–≤–æ—Ä–∞–º
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <ul class="nav nav-children">
                            <li class="nav-parent">
                                <a class="nav-link" href="#">
                                    <span>–õ–æ–≥–∏—Å—Ç–∏–∫–∞</span>
                                </a>
                                <ul class="nav nav-children">
                                    <li>
                                        <a class="nav-link" href="{% url 'logistics_app:waybill_list' %}">
                                            –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –Ω–∞–∫–ª–∞–¥–Ω–∞—è
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'logistics_app:package_list' %}">
                                            –ü–æ—Å—ã–ª–∫–∏
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <ul class="nav nav-children">
                            <li class="nav-parent">
                                <a class="nav-link" href="#">
                                    <span>–°–ª—É–∂–µ–±–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</span>
                                </a>
                                <ul class="nav nav-children">
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:memo_list' %}">
                                            –°–ª—É–∂–µ–±–Ω–∞—è –∑–∞–ø–∏—Å–∫–∞ <br>
                                            –Ω–∞ —Å–ª—É–∂–µ–±–Ω—É—é –ø–æ–µ–∑–¥–∫—É
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:bpmemo_list' %}">
                                            –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å –ø–æ <br>
                                            –°–ª—É–∂–µ–±–Ω—ã–º –∑–∞–ø–∏—Å–∫–∞–º
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <ul class="nav nav-children">
                            <li class="nav-parent">
                                <a class="nav-link" href="#">
                                    <span>–ò–ê–°</span>
                                </a>
                                <ul class="nav nav-children">
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:team_list' %}">
                                            <span>–°—Ç–∞—Ä—à–∏–µ –±—Ä–∏–≥–∞–¥</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:timesheet_list' %}">
                                            <span>–¢–∞–±–µ–ª—å –ú–ü–î</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:outfit_card_list' %}">
                                            –ñ—É—Ä–Ω–∞–ª —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ <br>
                                            –∫–∞—Ä—Ç-–Ω–∞—Ä—è–¥–æ–≤
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-parent">
                        <a class="nav-link" href="#">
                            <i class="bx bx-briefcase-alt-2" aria-hidden="true"></i>
                            <span>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</span>
                        </a>
                        <ul class="nav nav-children">
                            <li>
                                <a class="nav-link" href="{% url 'library_app:blank_list' %}">
                                    –ë–ª–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'hrdepartment_app:medical_list' %}">
                                    –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'hrdepartment_app:guidance_documents_list' %}">
                                    –†—É–∫–æ–≤–æ–¥—è—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="{% url 'hrdepartment_app:operational_list' %}">
                                    –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ç—ã
                                </a>
                            </li>
                            <li class="nav-parent">
                                <a class="nav-link" href="#">
                                    –õ–æ–∫–∞–ª—å–Ω–æ-–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ç—ã
                                </a>
                                <ul class="nav nav-children">
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:jobdescription_list' %}">
                                            –î–æ–ª–∂–Ω–æ—Å—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:briefings_list' %}">
                                            –ò–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂–∏
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:lpi_list' %}">
                                            –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¢–û –í–°
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:provisions_list' %}">
                                            –ü–æ–ª–æ–∂–µ–Ω–∏—è
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:order_list' %}">
                                            –ü—Ä–∏–∫–∞–∑—ã
                                        </a>
                                    </li>
                                    <li>
                                        <a class="nav-link" href="{% url 'hrdepartment_app:labor_protection_list' %}">
                                            –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –ø–æ –æ—Ö—Ä–∞–Ω–µ —Ç—Ä—É–¥–∞
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <a class="nav-link" href="#">
                                    –í—Ö–æ–¥—è—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
                                </a>
                            </li>
                            <li>
                                <a class="nav-link" href="#">
                                    –ò—Å—Ö–æ–¥—è—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a class="nav-link" href="{% url 'library_app:help_list' %}">
                            <i class='bx bxs-help-circle' aria-hidden="true"></i>
                            <span>–°–ø—Ä–∞–≤–∫–∞</span>
                        </a>
                    </li>
                    {% if user.is_superuser %}
                        <li class="nav-parent">
                            <a class="nav-link" href="#">
                                <i class='bx bxs-help-circle' aria-hidden="true"></i>
                                <span>–ö–æ–Ω–∫—É—Ä—Å</span>
                            </a>
                            <ul class="nav nav-children">
                                <li>
                                    <a class="nav-link" href="{% url 'library_app:submit_poem' %}">
                                        –ü—Ä–∏–µ–º —Å—Ç–∏—Ö–æ–≤
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="{% url 'library_app:vote' %}">
                                        –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="{% url 'library_app:results' %}">
                                        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
                                    </a>
                                </li>
                            </ul>
                        </li>
                    {% endif %}
                </ul>
            </nav>
            <hr class="separator"/>
            <div class="sidebar-widget widget-tasks">
                <div class="widget-header">
                    <h6>–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</h6>
                    <div class="widget-toggle">+</div>
                </div>
                <div class="widget-content">
                    <ul class="list-unstyled m-0">
                        <li><a href="https://barkol.ru/" target="_blank">–ì–ª–∞–≤–Ω—ã–π —Å–∞–π—Ç</a></li>
                        <li><a href="http://lk.barkol.ru/pls/apex/f?p=506" target="_blank">–ö–∞–±–∏–Ω–µ—Ç –∞–≤–∏–∞—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</a>
                        </li>
                        <li><a href="https://ms.barkol.ru/" target="_blank">–ü–æ—á—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –ë–ê–†–ö–û–õ</a></li>
                    </ul>
                </div>
            </div>
            <hr class="separator"/>
            <div class="sidebar-widget widget-stats">
                <div class="widget-header">
                    <h6>–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ö–û–ú–ü–ê–ù–ò–ò</h6>
                    <div class="widget-toggle">+</div>
                </div>

                <div class="widget-content">
                    <section class="card">
                        <header class="card-header">
                            <div class="card-actions">
                                <a href="#" class="card-action card-action-toggle" data-card-toggle></a>
                            </div>
                            <h2 class="card-title">–í—Å–µ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–æ–≤</h2>
                        </header>
                        <div class="card-body">
                            <div class="widget-summary">
                                <div class="widget-summary-col text-center">
                                    <div class="summary">
                                        <div class="info">
                                            <strong class="amount">{{ contracts_count }}</strong>
                                        </div>
                                    </div>
                                    <div class="summary-footer">
                                        <a href="{% url 'contracts_app:index' %}" class="text-uppercase">–û—Ç–∫—Ä—ã—Ç—å
                                            –±–∞–∑—É</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <div class="widget-content">
                    <section class="card">
                        <header class="card-header">
                            <div class="card-actions">
                                <a href="#" class="card-action card-action-toggle" data-card-toggle></a>
                            </div>
                            <h2 class="card-title">QR –∫–æ–¥</h2>
                        </header>
                        <div class="card-body">
                            <div class="widget-summary">
                                <div class="widget-summary-col text-center">
                                    <div class="summary">
                                        <img id="qr-code-image"
                                             src="{% url 'customers_app:generate_qr_code' current_url=request.get_full_path|url_encode %}"
                                             alt="QR Code" width="50%">
                                        <br>
                                        <span id="qr-code-message" class="text-3">QR –∫–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –µ—â–µ:</span>
                                        <div id="countdown" style="margin-top: 10px;"></div>
                                        <div id="expired-message" style="display: none; margin-top: 10px; color: red;">
                                            QR –∫–æ–¥ —É—Å—Ç–∞—Ä–µ–ª
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <div class="widget-content">
                    <section class="card">
                        <header class="card-header">
                            <div class="card-actions">
                                <a href="#" class="card-action card-action-toggle" data-card-toggle></a>
                            </div>
                            <h2 class="card-title">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ OnLine</h2>
                        </header>
                        <div class="card-body">
                            <div class="widget-summary">
                                <div class="widget-summary-col">
                                    <div class="summary">
                                        <ul id="online-users"></ul>
                                        {#                                        <script>#}
                                        {#                                            var online_users = "wss://corp.barkol.ru/ws/online_users/";#}
                                        {#                                            const socket_online_users = new WebSocket(online_users);#}
                                        {#                                            socket_online_users.onmessage = function (event) {#}
                                        {#                                                const data = JSON.parse(event.data);#}
                                        {#                                                if (data.is_admin) {#}
                                        {#                                                    if (data.type === 'online_users') {#}
                                        {#                                                        const usersList = document.getElementById('online-users');#}
                                        {#                                                        usersList.innerHTML = '';#}
                                        {#                                                        data.users.forEach(user => {#}
                                        {#                                                            const li = document.createElement('li');#}
                                        {#                                                            const link = document.createElement('a');#}
                                        {#                                                            link.href = `/users/staff/${user[1]}/`;  // –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è#}
                                        {#                                                            link.textContent = user[0];#}
                                        {#                                                            li.appendChild(link);#}
                                        {#                                                            usersList.appendChild(li);#}
                                        {#                                                        });#}
                                        {#                                                    }#}
                                        {#                                                } else {#}
                                        {#                                                    if (data.type === 'online_users') {#}
                                        {#                                                        const usersList = document.getElementById('online-users');#}
                                        {#                                                        usersList.innerHTML = '';#}
                                        {#                                                        data.users.forEach(user => {#}
                                        {#                                                            const li = document.createElement('li');#}
                                        {#                                                            li.textContent = user[0];#}
                                        {#                                                            usersList.appendChild(li);#}
                                        {#                                                        });#}
                                        {#                                                    }#}
                                        {#                                                }#}
                                        {##}
                                        {#                                            };#}
                                        {#                                            socket_online_users.onclose = function (event) {#}
                                        {#                                                console.error('WebSocket closed unexpectedly');#}
                                        {#                                            };#}
                                        {#                                        </script>#}
                                        <script>
                                            function showMessageToast(from, text) {
                                                const toastId = "toast-" + Date.now();

                                                const toastHtml = `
        <div id="${toastId}"
            class="toast shadow-sm border-0"
            style="z-index: 999999; backdrop-filter: blur(4px);"
            role="alert" aria-live="assertive" aria-atomic="true">

            <div class="toast-header"
                 style="background: #f5f5f7; color: #333; border-bottom: 1px solid #ddd;">
                <strong class="me-auto">üí¨ ${from}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
            </div>

            <div class="toast-body" style="background: #ffffff; color:#333;">
                ${text}
            </div>
        </div>
    `;

                                                const area = document.getElementById("toastArea");
                                                area.insertAdjacentHTML('beforeend', toastHtml);

                                                const toastElement = document.getElementById(toastId);

                                                const bsToast = new bootstrap.Toast(toastElement, {
                                                    autohide: false  // –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–∞–º
                                                });

                                                bsToast.show();
                                            }
                                        </script>

                                        <script>

                                            document.addEventListener("DOMContentLoaded", function () {

                                                const modalElement = document.getElementById('sendMessageModal');

                                                if (!modalElement) {
                                                    console.error('Modal element #sendMessageModal not found in DOM');
                                                    return;
                                                }

                                                const bsModal = new bootstrap.Modal(modalElement);

                                                let selectedUserId = null;

                                                window.openModal = function (username, userId) {
                                                    selectedUserId = userId;
                                                    document.getElementById("sendMessageLabel").textContent = "–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è " + username;
                                                    document.getElementById("modal-text").value = "";
                                                    bsModal.show();
                                                };

                                                document.getElementById("modal-send").onclick = function () {
                                                    const msg = document.getElementById("modal-text").value.trim();
                                                    if (msg && selectedUserId) {
                                                        private_socket.send(JSON.stringify({
                                                            type: "private_message",
                                                            to: selectedUserId,
                                                            message: msg
                                                        }));
                                                    }
                                                    bsModal.hide();
                                                };

                                            });

                                            // --- Online users WebSocket ---
                                            const online_users_url = "wss://corp.barkol.ru/ws/online_users/";
                                            const socket_online_users = new WebSocket(online_users_url);

                                            // --- Private messages WebSocket ---
                                            const private_socket = new WebSocket("wss://corp.barkol.ru/ws/private/");

                                            // --- –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π ---
                                            private_socket.onmessage = function (event) {
                                                const data = JSON.parse(event.data);

                                                if (data.type === "private_message") {
                                                    showMessageToast(data.from_name, data.message);
                                                }
                                            };

                                            private_socket.onclose = function () {
                                                console.error("Private WebSocket –∑–∞–∫—Ä—ã—Ç");
                                            };

                                            // --- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ---
                                            socket_online_users.onmessage = function (event) {
                                                const data = JSON.parse(event.data);

                                                if (data.type === 'online_users') {
                                                    const usersList = document.getElementById('online-users');
                                                    usersList.innerHTML = '';

                                                    data.users.forEach(user => {
                                                        const username = user[0]; // –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
                                                        const userId = user[1];   // PK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

                                                        const li = document.createElement('li');
                                                        const link = document.createElement('a');

                                                        link.textContent = username;

                                                        // --- –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è ---
                                                        link.addEventListener("dblclick", function (e) {
                                                            e.preventDefault();
                                                            openModal(username, userId);
                                                        });

                                                        li.appendChild(link);
                                                        usersList.appendChild(li);
                                                    });
                                                }
                                            };

                                            socket_online_users.onclose = function () {
                                                console.error('Online WebSocket –∑–∞–∫—Ä—ã—Ç');
                                            };
                                        </script>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
        <script>
            // Maintain Scroll Position
            if (typeof localStorage !== 'undefined') {
                if (localStorage.getItem('sidebar-left-position') !== null) {
                    var initialPosition = localStorage.getItem('sidebar-left-position'),
                        sidebarLeft = document.querySelector('#sidebar-left .nano-content');
                    sidebarLeft.scrollTop = initialPosition;
                }
            }
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const countdownElement = document.getElementById('countdown');
                const qrCodeImage = document.getElementById('qr-code-image');
                const expiredMessage = document.getElementById('expired-message');
                const qrCodeMessage = document.getElementById('qr-code-message');

                let timeLeft = 30;

                function updateCountdown() {
                    countdownElement.textContent = `${timeLeft} —Å–µ–∫—É–Ω–¥`;
                    timeLeft--;

                    if (timeLeft < 0) {
                        clearInterval(countdownInterval);
                        countdownElement.style.display = 'none';
                        qrCodeImage.style.display = 'none';
                        qrCodeMessage.style.display = 'none';
                        expiredMessage.style.display = 'block';
                    }
                }

                updateCountdown();
                const countdownInterval = setInterval(updateCountdown, 1000);
            });
        </script>
    </div>
</aside>

{% block SpecificPageVendor %}

{% endblock %}